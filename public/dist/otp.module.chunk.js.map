{"version":3,"sources":["C:/Users/doraised/Downloads/anamik17-flarow-c1be5e135b70/anamik17-flarow-c1be5e135b70/angular/app/otp/otp.component.html","C:/Users/doraised/Downloads/anamik17-flarow-c1be5e135b70/anamik17-flarow-c1be5e135b70/angular/app/otp/otp.component.ts","C:/Users/doraised/Downloads/anamik17-flarow-c1be5e135b70/anamik17-flarow-c1be5e135b70/angular/app/otp/otp.module.ts","C:/Users/doraised/Downloads/anamik17-flarow-c1be5e135b70/anamik17-flarow-c1be5e135b70/angular/app/otp/otp.routing.ts"],"names":[],"mappings":"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","file":"otp.module.chunk.js","sourcesContent":["module.exports = \"<div class=\\\"wrapper wrapper-full-page\\\">\\n    <nav class=\\\"navbar navbar-primary navbar-transparent navbar-absolute\\\">\\n        <div class=\\\"container\\\">\\n            <div class=\\\"navbar-header\\\">\\n                <button type=\\\"button\\\" class=\\\"navbar-toggle\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#menu\\\">\\n                    <span class=\\\"sr-only\\\">Toggle navigation</span>\\n                    <span class=\\\"icon-bar\\\"></span>\\n                    <span class=\\\"icon-bar\\\"></span>\\n                    <span class=\\\"icon-bar\\\"></span>\\n                </button>\\n                <a class=\\\"navbar-brand\\\" href=\\\"/#/home\\\">FLAROW</a>\\n            </div>\\n            <div class=\\\"collapse navbar-collapse\\\" id=\\\"menu\\\">\\n                <ul class=\\\"nav navbar-nav navbar-right\\\">\\n                    <li class=\\\"active\\\">\\n                        <a href=\\\"/#/login\\\">\\n                            <i class=\\\"material-icons\\\">fingerprint</i> Login\\n                        </a>\\n                    </li>\\n                </ul>\\n            </div>\\n        </div>\\n    </nav>\\n    <div class=\\\"full-page login-page\\\" filter-color=\\\"black\\\">\\n        <div class=\\\"content\\\">\\n            <div class=\\\"container\\\">\\n                <div class=\\\"row\\\">\\n                    <div class=\\\"col-md-4 col-sm-6 col-md-offset-4 col-sm-offset-3\\\">\\n                        <form #f=\\\"ngForm\\\">\\n                            <div class=\\\"card card-login card-hidden\\\">\\n                                <div class=\\\"card-header text-center\\\" data-background-color=\\\"red\\\">\\n                                    <i class=\\\"fa fa-shield fa-3x\\\" aria-hidden=\\\"true\\\"></i>\\n                                    <h4 class=\\\"card-title\\\">OTP</h4>\\n                                </div>\\n                                <div class=\\\"card-content\\\">\\n                                    <div class=\\\"input-group\\\">\\n                                        <span class=\\\"input-group-addon\\\">\\n                                            <i class=\\\"material-icons\\\">security</i>\\n                                        </span>\\n                                        <div class=\\\"row\\\">\\n                                            <div class=\\\"col-md-5 col-sm-5\\\">\\n                                                <div class=\\\"form-group label-floating\\\">\\n                                                    <label class=\\\"control-label\\\">OTP</label>\\n                                                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"uname\\\" name=\\\"uname\\\" [ngModel]=\\\"name\\\" required #uname=\\\"ngModel\\\">\\n                                                    <small [hidden]=\\\"uname.valid || (uname.pristine && !f.submitted)\\\" class=\\\"text-danger\\\">\\n                                                        Please enter your otp\\n                                                    </small>\\n                                                </div>\\n                                            </div>\\n                                            <div class=\\\"col-md-7 col-sm-6\\\">\\n                                                <div class=\\\"form-group label-floating\\\">\\n                                                    <button class=\\\"btn btn-rose btn-simple btn-wd btn-lg pull-right\\\" (click)=\\\"resend()\\\">\\n                                                        Resend OTP?\\n                                                    </button>\\n                                                </div>\\n                                            </div>\\n                                        </div>\\n                                        \\n                                    </div>\\n\\n                                </div>\\n                                <div class=\\\"footer text-center\\\">\\n                                    <button [disabled]=\\\"!f.valid\\\" (click)=\\\"onSubmit($event.target, f)\\\"  \\n                                    class=\\\"btn btn-rose btn-simple btn-wd btn-lg\\\">Submit</button>\\n                                    <a href=\\\"#/register\\\" \\n                                    class=\\\"btn btn-rose btn-simple btn-wd btn-lg\\\">Sign up</a>\\n                                </div>\\n                            </div>\\n                        </form>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"full-page-background\\\" style=\\\"background-image: url(//studphotos.s3.amazonaws.com/img/apartment.jpg) \\\"></div>\\n    </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/doraised/Downloads/anamik17-flarow-c1be5e135b70/anamik17-flarow-c1be5e135b70/angular/app/otp/otp.component.html\n// module id = ../../../../../angular/app/otp/otp.component.html\n// module chunks = otp.module","import { Component, OnInit, NgZone } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { Http, Headers, Response, RequestOptions } from '@angular/http';\n\nimport { AuthService } from '../login/auth.service';\n\ndeclare var $: any;\n@Component({\n    selector: 'app-otp-cmp',\n    templateUrl: './otp.component.html'\n})\n\nexport class OtpComponent implements OnInit {\n\n    data: any;\n    name:any;\n    isDisabled: boolean;\n\n    constructor(private http: Http, private router: Router, private toastr: ToastrService, private authService: AuthService) {}    \n\n    ngOnInit() {\n        this.isDisabled = false;\n        setTimeout(function() {\n            $('.card').removeClass('card-hidden');\n        }, 700);        \n    }\n\n    onSubmit(element, form: NgForm){\n        element.disabled = true;\n        element.textContent = \"Loading...\";\n        \n        this.data = {\n            name:localStorage.getItem('lname'),\n            mobile:localStorage.getItem('lmobile'),\n            email:localStorage.getItem('lemail'),\n            password:localStorage.getItem('lpwd'),\n            type:localStorage.getItem('ltype'),\n            otp:form.value.uname\n        } \n\n        this.http.post('/api/auth/register', this.data)\n        .toPromise()\n        .then(response => {        \n            // login successful if there's a jwt token in the response\n            if(response.json().data != undefined){\n                let token = response.json() && response.json().data.token;\n                let userType = response.json() && response.json().data.user.type;\n                let userId = response.json() && response.json().data.user.id;\n                let uname = response.json() && response.json().data.user.name;\n                if (token) {\n\n                    this.authService.login(this.data.email, this.data.password)\n                    .subscribe(result => {\n                        console.log(result);\n                        if (result === true) {\n                            // login successful\n                            this.router.navigate(['/dashboard']);\n                        } else {\n                            // login failed\n                            console.log(\"login failed\");\n                            //this.error = 'Username or password is incorrect';\n                            //this.loading = false;\n                        }\n                    });\n\n                    // store username and jwt token in local storage to keep user logged in between page refreshes\n                    // localStorage.setItem('currentUser', JSON.stringify({ 'userId': userId, token: token }));\n                    // localStorage.setItem('currentUserType', userType);\n                    // localStorage.setItem('userId',userId);\n                    // localStorage.setItem('name',uname);\n\n                    //this.router.navigateByUrl('/dashboard'); \n\n                    //let that = this;\n                    // this.zone.run(() => {\n                    //     that.router.navigateByUrl('/dashboard');\n                    // });\n                    // console.log('got token');\n                    // console.log(token);\n                    // setTimeout(function () { that.router.navigate(['/dashboard']); }, 50);\n                }\n            }else{\n                this.toastr.error('Invalid OTP', 'Flarow!');\n            }\n        });\n\n    }\n\n    resend(){\n        this.data = {\n            name:localStorage.getItem('lname'),\n            mobile:localStorage.getItem('lmobile'),\n            email:localStorage.getItem('lemail'),\n            password:localStorage.getItem('lpwd'),\n            type:localStorage.getItem('ltype'),\n            otp:0\n        }\n\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers });\n        this.http.post('/api/reSend', this.data, options)\n        .toPromise()\n        .then(response => {\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/doraised/Downloads/anamik17-flarow-c1be5e135b70/anamik17-flarow-c1be5e135b70/angular/app/otp/otp.component.ts","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MdModule } from '../md/md.module';\n\nimport { OtpComponent } from './otp.component';\nimport { OtpRoutes } from './otp.routing';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        RouterModule.forChild(OtpRoutes),\n        FormsModule,\n        MdModule\n    ],\n    declarations: [OtpComponent]\n})\n\nexport class OtpModule {}\n\n\n// WEBPACK FOOTER //\n// C:/Users/doraised/Downloads/anamik17-flarow-c1be5e135b70/anamik17-flarow-c1be5e135b70/angular/app/otp/otp.module.ts","import { Routes } from '@angular/router';\n\nimport { OtpComponent } from './otp.component';\n\nexport const OtpRoutes: Routes = [\n    {\n\n      path: '',\n        children: [ {\n            path: '',\n            component: OtpComponent\n        }]\n    }\n];\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/doraised/Downloads/anamik17-flarow-c1be5e135b70/anamik17-flarow-c1be5e135b70/angular/app/otp/otp.routing.ts"],"sourceRoot":"webpack:///"}